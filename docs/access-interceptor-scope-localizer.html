<!DOCTYPE html>
<html class="no-js" id="top">
<head>
    <title>ProxyManager Documentation - Access Interceptor Scope Localizer Proxy</title>

    <meta name="description" content="A proxyManager write in php" />
    <meta name="keywords" content="ProxyManager, proxy, manager, ocramius, Marco Pivetta, php" />
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
    <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400,600' rel='stylesheet' type='text/css'>
    <link href="https://ocramius.github.io/ProxyManager/css/main.css" rel="stylesheet" />
    <link href="https://ocramius.github.io/ProxyManager/css/highlight.dark.css" rel="stylesheet" />
    <script src="//code.jquery.com/jquery-2.1.3.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.3/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <link rel="shortcut icon" href="favicon.ico">
</head>
<body>

<header class="site-header">
<div class="container">
<h1><a href="https://ocramius.github.io/ProxyManager"><img alt="ProxyManager" src="https://ocramius.github.io/ProxyManager/img/block.png" /></a></h1>

<nav class="main-nav" role="navigation">
<ul>
    <li><a href="https://github.com/Ocramius/ProxyManager" target="_blank">Github</a></li>

    </ul>
    <div class="bcms-clearfix"></div>
</nav>
</div>
</header>
<main role="main">
<section class="component-content"><div class="page-title-wrapper">
<div class="container">
    <img src="https://github.com/Ocramius/ProxyManager/raw/master/proxy-manager.png">
    <h2 class="page-title">Proxy Manager</h2>
</div>
</div>

<div class="component-demo" id="live-demo">
    <div class="container">
            <div class="main-wrapper" style="text-align: right">
                <iframe src="http://ghbtns.com/github-btn.html?user=ocramius&amp;repo=ProxyManager&amp;type=fork&amp;count=true&amp;size=large"
  allowtransparency="true" frameborder="0" scrolling="0" width="310" height="40"></iframe>

                <iframe src="http://ghbtns.com/github-btn.html?user=ocramius&amp;repo=ProxyManager&amp;type=watch&amp;count=true&amp;size=large"
  allowtransparency="true" frameborder="0" scrolling="0" width="200" height="40"></iframe>

            </div>
        <div class="bcms-clearfix bcms-clearfix"></div>
    </div>
</div>
<div class="component-info">
<div class="container">

<aside class="sidebar">
    <nav class="spy-nav">
        <ul>
            <li><a href="https://ocramius.github.io/ProxyManager/index.html">Intro</a></li>
            <li><a href="https://ocramius.github.io/ProxyManager/docs/lazy-loading-value-holder.html">Virtual Proxy</a></li>
            <li><a href="https://ocramius.github.io/ProxyManager/docs/lazy-loading-ghost-object.html">Ghost Object</a></li>
            <li><a href="https://ocramius.github.io/ProxyManager/docs/access-interceptor-value-holder.html">Smart Reference</a></li>
            <li><a href="https://ocramius.github.io/ProxyManager/docs/access-interceptor-scope-localizer.html">Smart Reference<br/>(fluent safe)</a></li>
            <li><a href="https://ocramius.github.io/ProxyManager/docs/null-object.html">Null Objects</a></li>
            <li><a href="https://ocramius.github.io/ProxyManager/docs/remote-object.html">Remote Object</a></li>
            <li><a href="https://ocramius.github.io/ProxyManager/docs/generator-strategies.html">Code Evaluators</a></li>
            <li><a href="https://ocramius.github.io/ProxyManager/docs/tuning-for-production.html">Tuning for Production</a></li>
        </ul>
    </nav>
<div class="bcms-clearfix bcms-clearfix"></div>
<a class="btn btn-action btn-full download-component"
    href="https://ocramius.github.io/ProxyManager/docs/download.html">Download</a>
    <div class="bcms-clearfix"></div>
</aside>

<div class="content">
    
        <h1 id="access-interceptor-scope-localizer-proxy">Access Interceptor Scope Localizer Proxy</h1>
<p>An access interceptor scope localizer is a smart reference proxy that allows you to dynamically
define logic to be executed before or after any of the proxied object's methods' logic.</p>
<p>It works exactly like the <a href="access-interceptor-value-holder.html">access interceptor value holder</a>,
with some minor differences in behavior.</p>
<p>The working concept of an access interceptor scope localizer is to localize scope of a proxied object:</p>
<pre><code class="language-php">class Example
{
    protected $foo;
    protected $bar;
    protected $baz;

    public function doFoo()
    {
        // ...
    }
}

class ExampleProxy extends Example
{
    public function __construct(Example $example)
    {
        $this-&gt;foo = &amp; $example-&gt;foo;
        $this-&gt;bar = &amp; $example-&gt;bar;
        $this-&gt;baz = &amp; $example-&gt;baz;
    }

    public function doFoo()
    {
        return parent::doFoo();
    }
}</code></pre>
<p>This allows to create a mirror copy of the real instance, where any change in the proxy or in the real
instance is reflected in both objects.</p>
<p>The main advantage of this approach is that the proxy is now safe against fluent interfaces, which
would break an <a href="access-interceptor-value-holder.html">access interceptor value holder</a> instead.</p>
<h2 id="differences-with">Differences with <a href="access-interceptor-value-holder.html">access interceptor value holder</a>:</h2>
<ul>
<li>It does <strong>NOT</strong> implement the <code>ProxyManager\Proxy\ValueHolderInterface</code>, since the proxy itself
does not keep a reference to the original object being proxied</li>
<li>In all interceptor methods (see <a href="access-interceptor-value-holder.html">access interceptor value holder</a>),
the <code>$instance</code> passed in is the proxy itself. There is no way  to gather a reference to the
original object right now, and that's mainly to protect from misuse.</li>
</ul>
<h2 id="known-limitations">Known limitations</h2>
<ul>
<li>It is <strong>NOT</strong> possible to intercept access to public properties</li>
<li>It is <strong>NOT</strong> possible to proxy interfaces, since this proxy relies on <code>parent::method()</code> calls.
Interfaces obviously don't provide a parent method implementation.</li>
<li>calling <code>unset</code> on a property of an access interceptor scope localizer (or the real instance)
will cause the two objects to be un-synchronized, with possible unexpected behaviour.</li>
<li>serializing or un-serializing an access interceptor scope localizer (or the real instance)
will not cause the real instance (or the proxy) to be serialized or un-serialized</li>
<li>methods using <code>func_get_args()</code>, <code>func_get_arg()</code> and <code>func_num_arg()</code> will not function properly
for parameters that are not part of the proxied object interface: use
<a href="http://php.net/manual/en/functions.arguments.php#functions.variable-arg-list">variadic arguments</a>
instead.</li>
</ul>
<h2 id="example">Example</h2>
<p>Here's an example of how you can create and use an access interceptor scope localizer :</p>
<pre><code class="language-php">&lt;?php

use ProxyManager\Factory\AccessInterceptorScopeLocalizerFactory as Factory;

require_once __DIR__ . '/vendor/autoload.php';

class Foo
{
    public function doFoo()
    {
        echo "Foo!\n";
    }
}

$factory = new Factory();

$proxy = $factory-&gt;createProxy(
    new Foo(),
    ['doFoo' =&gt; function () { echo "PreFoo!\n"; }],
    ['doFoo' =&gt; function () { echo "PostFoo!\n"; }]
);

$proxy-&gt;doFoo();</code></pre>
<p>This send something like following to your output:</p>
<pre><code>PreFoo!
Foo!
PostFoo!</code></pre>
<p>This is pretty much the same logic that you can find
in <a href="access-interceptor-value-holder.html">access interceptor value holder</a>.</p>

    </div>
</div>
</div>
</section>
</main>

    <footer class="site-footer" role="contentinfo">
        <div class="container">
            <div class="footer-logos">
                <ul>
                    <li><a href="https://ocramius.github.io/ProxyManager/STABILITY.html">Stability</a> | </li>
                    <li><a href="https://ocramius.github.io/ProxyManager/UPGRADE.html">Upgrade Notes</a> | </li>
                    <li><a href="https://ocramius.github.io/ProxyManager/CONTRIBUTING.html">Contributing</a> | </li>
                    <li><a href="https://ocramius.github.io/ProxyManager/docs/credits.html">Credits</a> | </li>
                    <li><a href="https://ocramius.github.io/ProxyManager/docs/copyright.html">Copyright</a></li>
                </ul>
            </div>
        </div>

        <div class="bcms-clearfix"></div>
    </footer>
    <div class="bcms-clearfix"></div>
    </body>
</html>
